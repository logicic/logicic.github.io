---
layout:     post
title:      自顶向下网络设计——分析技术目标与折衷措施
subtitle:   自顶向下网络设计————辨明用户的需求和目标（二）
date:       2021-04-17
author:     logicic
catalog: true
tags:
    - 自顶向下网络设计
    - network
---

**写在前面：不知道网络发展的今天是否与书本的知识脱节，加上本人的能力不足，若有不对的地方请指正，谢谢**

## 自顶向下网络设计（一）

**-- 摘自《自顶向下网络设计》**

### 本书的结构分为四个模块：

1. 辨明用户的需求和目标
2. 逻辑网络设计
3. 物理网络设计
4. 网络测试，优化和文档编写


### 本书目标：

帮助设计出能够满足客户商业及技术目标的网络，包括功能、容量、性能、可用性、可扩展性、可购买性、安全性以及可管理性等各个方面需求的企业网络。

### 本模块分分成四章：

1. 分析商业目标和制约
2. 分析技术目标与折衷措施
3. 现有互联网的特征分类
4. 网络流量的特征分类

#### 2.分析技术目标与折衷措施

典型的技术目标包括：可扩展性、可用性、网络性能、安全性、可管理性、易用性、适应性和可购买性。当然，这些目标有些是矛盾的，所以又会考虑到一些折衷措施。

##### 2.1可扩展性

**定义**：指网络方案必须能够支持的网络增长幅度。

**解决的问题**：以应对许多大公司以相当快的速度频繁地增添用户、应用、新站点以及与外部网络的连接

**怎么做**：

1. 了解扩展规划：了解该网络项目的一两年内的扩展计划，将会增加多少站点？每个新增站点的网络将会多大？新增多少用户访问网络？会新增多少服务器？
2. 访问数据的扩展：新增的数据访问应具备相应的带宽提供能力等问题。
3. 制约可扩展性的问题：网络技术固有的、会阻碍可扩展性。比如，选择2层交换机的平面网络拓扑结构会引起用户规模扩展问题，尤其是在用户的应用或网络协议发送大量广播帧的情况下（交换机会向所有相连的网段转发广播帧）。

##### 2.2可用性

**定义**：指网络可供用户使用的时间。例如，一个可提供每周7天、每天24小时服务的网络，网络在一周168小时之内运行了165h，其可用性为98.21%。

**解决的问题**：这是一个衡量网络服务的一个指标，比如，可用性99.70%，表明每周停机的时间是30min，它可能发生在这一周内的任何时间，可能集中爆发，可能分散到每小时都有可能，如果在工作日集中爆发某个时间段，有可能就不能接受了，在某中服务下，断线几秒钟也是不行的，所以需要明确需求，人的需求，业务的需求等等。因为提供可用性指标，必然也会带来成本的问题。

**怎么做**：

1. 可用性与冗余性有关，冗余性是实现网络高可用性目标的一种解决方案。提供一种冗余拓扑网络结构，以解决在一个大的故障或灾难之后仍能保证商业运行的连续性。
2. 可用性与网络可恢复性有关，指一个网络所能够承受的压力的多少，以及这个网络能多块的速度从安全破坏、自然或非自然灾害、认为错误以及严重的软硬件错误所引起的问题上修复过来。灾难恢复计划包括将数据北非保存到一个或多个不太可能受灾害影响的地方，以及如果灾难影响了主要技术方案，切换到备份技术方案的过程。
3. 明确可用性要求：到底需要达到什么样的程度，多少可用性能够接受，停机成本是多少等等。

##### 2.3网络性能

**网络性能目标的定义**：

- 容量（带宽）：电路或网络的数据承载能力，通常以每秒多少比特（bit/s）来衡量
- 利用率：全部可用容量百分比
- 最有利用率：网络饱和之前的最大平均利用率
- 吞吐量：单位时间内（通常以秒为单位）节点之间成功传送无差错的数据数量
- 提供的负载：在某一特定时间，准备发送的所有网络节点的所有数据的总量
- 精确度：相对于全部流量，正常传送的有用的流量数量
- 效率：产生一定数据的数据吞吐量需要采取大多措施的测量值
- 延迟（时延）：数据帧准备从一个节点传递到网络其他任何节点之间的时间
- 延迟变量：平均延迟变化的时间量
- 响应时间：网络业务请求和响应该请求之间的时间

###### 最优网络利用率

**定义**：指在特定时间段所使用的带宽的测量值。利用率通常以容量的百分比来指明。

**制约**：如果一个网段的利用率超过预先定义的门限值，那么就必须增加额外的网段或带宽。

对于广域网来说，最佳平均网络利用率大约为70%，这意味着在网络流量最忙时网络性能也不会出现明显降低，如果高出70%太多的话，在网络流量繁忙（针对业务功能使用上来说）时，会影响网络性能。

###### 吞吐量

**定义**：单位时间内传输的无差错数据总量。通常，吞吐量是针对某个特定链接或会话的。

**区分**：吞吐量和带宽，一个是物理上的限定值，一个是依据实际测试的环境，数据传输的测试值，比如，设计一个钢管，它的容量是每分钟传输100加仑，这个是钢管的容量，固定值，当细流通过钢管时，吞吐量分低，当吞吐量达到70%时，可能会面临着泛洪。

**分类**：

- 网络互连设备的吞吐量：在不丢弃任何数据包的情况下，该设备所能转发数据包的最大速率（pps或cps）。
- 应用层吞吐量（有效吞吐量）：单位时间内传输的有效的并与应用层相关的数据量。

**应用层吞吐量的制约因素**：

- 端到端的差错率
- 协议功能，利用握手机制、窗口、确认应答等
- 协议参数，如帧大小和重传定时器
- 网络互连设备的pps或cps值
- 网络互连设备的数据包或信元丢失
- 工作站及服务器性能因素
- 磁盘存取速度
- 磁盘高速缓存大小
- 设备驱动性能（容量和仲裁方法）
- 处理器性能
- 内存性能（实存和虚拟内存的存取时间）
- 操作系统的低效率
- 应用程序的低效率和缺陷

###### 精确度

**总体目标**：目的节点接收到的数据必须与源节点发送的数据相同。

**引起数据错误的典型原因**：

- 物理层：电源电涌或尖脉冲、阻抗不匹配、质量低劣的物理连接、设备失效或由电器设备引起的噪声等
- 软件层：软件设计时的缺陷也可能导致数据错误。

###### 效率

**定义**：产生一定数据的数据吞吐量需要采取大多措施的测量值。

当网络中的冲突很高时，因为许多帧都因冲突发生了重传，为了成功发送帧付出了巨大的代价，所以它的效率是很低的。

在不考虑其他因素的影响时，巨大的帧头是导致低效率的原因之一，因为它的信息利用率是比较低的，比如，在固定的帧头大小时，相同的信息传递，小帧需要传输4帧，大帧传输只需要2帧，但是小帧传输了4个帧头的信息无效信息（针对业务），大帧才2个，所以帧越大（帧头占比越小），效率越高。

但是，从误码率的角度上看，帧越大（数据越多），误码率就越大，错误会导致重传，这又会导致效率降低，所以会有一个折衷的数字来规范帧大小。

###### 延迟和延迟变量

**定义**：数据帧准备从一个节点传递到网络其他任何节点之间的时间。平均延迟变化的时间量

对于交互式应用的用户希望得到反馈的时间越快越好。对越声音和视频应用来说，还需要减少数据包延迟的变化量。延迟变化量，也称为抖动，它能引起声音质量断续和视频流的跳帧。

###### 响应时间

**定义**：网络业务请求和响应该请求之间的时间

一般来说，当响应时间超过100ms时，用户就会注意到他们在等待网络显示网页，回应键入的字符等等。100ms门限值通常用作提供可靠数据传输协议的定时器值，例如，许多TCP的实现在默认情况下，100ms后重传违背确认的数据。

##### 2.4安全性

**目标**：网络安全问题不能中断公司进行商业活动的能力。

**怎么做**：

1. 规划：决定需要保护的网络资产，分析威胁和指定需求。一般要做网络资产鉴定，包括硬件、软件、应用程序和数据、知识产权、商业机密和公司的声誉，网络用户的时间等等。还需要做风险评估：客户数据敏感程度如何？如果被盗取了机密，财政方面会损失多少？如果被修改了数据，所造成的财政损失是多少？如果安全缺陷致使网络业务中断而导致员工停止工作，所造成的损失是多少？
2. 折衷：安全性和易用性和可购买性一般是冲突的

**安全性需求**：

- 数据机密性确保只有授权用户才可以看到敏感信息
- 数据完整性确保只有授权用户才可以更改敏感信息，从而确保数据的授权用户可以确信数据的真实性
- 系统和数据可靠性，可以确保不受中断地访问重要计算资源
- 运训外部用户访问公共网页或文件传输协议（FTP）服务器上的数据，但不允许访问内部数据
- 授权并认证分支部门用户、移动用户和远程用户
- 检测入侵者并隔离他们所作的破坏
- 认证从额你不或外部路由器接受的路由表更新信息
- 保护通过VPN传送到远程站点的数据
- 从物理上保护主机和网络互连设备（例如将设备所在机房内）
- 利用用户账号核对目录及文件的访问权限，从逻辑上保护主机和网络互连设备
- 防止应用程序和数据感染上软件病毒
- 培训网络用户二号网络管理员的安全风险知识，以避免安全性威胁和问题
- 通过版权或其他合法的方法保护产品及知识产权
- 满足遵从性和法规要求

##### 2.5可管理性

**定义**：可管理型关注使管理员的工作更容易。

**ISO使用了FCAPS的简称来帮助记忆网络管理功能**：

- 故障管理：检测、隔离和纠正问题；向最终用户和管理员报告问题u；跟踪与问题相关的趋势
- 配置管理：控制、运行、辨明和采集来自被管理设备的数据
- 计费管理：按分摊的成本计算网络用户使用网络的费用，规划容量需求的变化
- 性能管理：分析流量和应用的行为，以优化网络，满足服务级别协定和扩展规划
- 安全管理：监视和测试安全性和保护策略，维护并分发口令和其他认证、授权信息，管理加密密钥，审计与安全策略相关的事项

##### 2.6易用性

**定义**：易用性是指网络用户访问网络服务的容易程度。

##### 2.7适应性

**定义**：设计网路时，应极力避免采用任何在将来难以实现新技术的不协调元素。一个而优秀的网络设计应该能适应新的技术和比那花。变化的可能是以新技术、新商业时间、新财政目标、新法案、以及其他无数可能的方式出现。适应性的另一个方面是，网络护肩设别必须以多块的速度来适应新出现的问题和进行升级。比如，交换机和网桥应以多块的速度适应另一台交换机的失效，以及引起的生成树拓扑结构的变化？

##### 2.8可购买性

通常来说，在园区网中，低成本是一个主要目标，在企业网中，可用性比低成本要重要得多，但是还是会在保证一定的可用性寻求减少成本的方法。

**为降低运行广域网的成本，客户们通常具备以下一个或多个技术目标以实现可购买性**：

- 使用路由协议将广域网流量最小化
- 合并并行专线将语音和数据通过更少的广域网中继链路传输
- 选择动态分配广域网带宽的技术，例如，选择ATM技术而不选择时分多路复用技术（TDM）
- 通过使用注入压缩技术提高广域网链路的效率
- 核减在互连网络中利用率不高的中继线路，通过核减电路成本和中继电路硬件以节约开支
- 使用支持超额订阅的技术

**为降低操作和管理网络人员的雇佣、培训等成本：**

- 选择易于配置、操作、维护和管理的网络互连设备
- 选择易于理解和故障排查的网络设计
- 指定良好的网络文档资料，减少故障排查的时间
- 选择易于使用的网络应用程序和协议，以便用户在一定程度上可以自己解决问题



#### 总结：

作为开发，我们可以感受一下这么过程，只用关系应用层的性能，安全性，可能运维还得关心多一点东西。